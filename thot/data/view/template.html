<!DOCTYPE html>
<html>
	<head>
		<title><thot:title/></title>
		<meta name="AUTHOR" content="<thot:authors/>">
		<meta name="GENERATOR" content="Thot <thot:text>@THOT_VERSION@</thot:text>/>">
		<meta http-equiv="Content-Type" content="text/html; charset='<thot:text>@ENCODING@</thot:text>'">
		<thot:header/>
	</head>
<body>

<header>
	<h1><thot:title/></h1>
</header>

<main>
	<thot:content/>
	<div class="footnotes">
		<thot:footnotes/>
	</div>
</main>

<footer>
	<div class="authors">
		<thot:authors/>
	</div>
	<div class="tool-authors">
		Powered by <a href="https://github.com/hcasse/Thot">Thot.</a>
		-
		Theme <thot:style_authoring/>
	</div>
</footer>

<script>
	const thot_request = new XMLHttpRequest();
	const heartbeat_delay = 500;
	var heartbeat_timeout;

	function heartbeat() {
		start_heartbeat();
		thot_request.open("GET", "/heartbeat", true);
		thot_request.send();
	}

	function start_heartbeat() {
		console.log("start heartbeat!");
		heartbeat_timeout = setTimeout(heartbeat, heartbeat_delay);
	}

	function stop_heartbeat() {
		if(heartbeat_timeout != null) {
			clearTimeout(heartbeat_timeout);
			heartbeat_timeout = null;
		}
	}

	start_heartbeat();

</script>

</body>
</html>

